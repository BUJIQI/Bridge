{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onMounted } from 'vue';\nimport { useUserStore } from '@/store/user';\nimport axios from 'axios';\nimport router from '@/router';\nimport Swal from 'sweetalert2';\nexport default {\n  name: 'App',\n  setup() {\n    const userStore = useUserStore();\n    onMounted(() => {\n      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n      const currentPath = router.currentRoute.value.path;\n      if (!isLoggedIn && currentPath !== '/login' && currentPath !== '/register') {\n        router.push('/login');\n      } else if (isLoggedIn) {\n        userStore.setUserInfo(JSON.parse(localStorage.getItem('userInfo')));\n      }\n    });\n\n    // 拦截所有axios请求，检查响应状态码\n    axios.interceptors.response.use(response => response, error => {\n      if (error.response && error.response.status === 403) {\n        // 如果接收到403状态码，自动注销用户并跳转到登录页面\n        Swal.fire({\n          title: '登录状态过期',\n          text: '当前登录状态已过期，请重新登录',\n          icon: 'warning',\n          confirmButtonText: '确定'\n        }).then(() => {\n          localStorage.clear();\n          router.push('/login');\n        });\n      }\n      return Promise.reject(error);\n    });\n  }\n};","map":{"version":3,"names":["onMounted","useUserStore","axios","router","Swal","name","setup","userStore","isLoggedIn","localStorage","getItem","currentPath","currentRoute","value","path","push","setUserInfo","JSON","parse","interceptors","response","use","error","status","fire","title","text","icon","confirmButtonText","then","clear","Promise","reject"],"sources":["D:\\当下文件\\python\\Bridge-1\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <router-view />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from 'vue';\r\nimport { useUserStore } from '@/store/user';\r\nimport axios from 'axios';\r\nimport router from '@/router';\r\nimport Swal from 'sweetalert2';\r\n\r\nexport default {\r\n  name: 'App',\r\n  setup() {\r\n    const userStore = useUserStore(); \r\n\r\n    onMounted(() => {\r\n      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\r\n      const currentPath = router.currentRoute.value.path;\r\n\r\n      if (!isLoggedIn && currentPath !== '/login' && currentPath !== '/register') {\r\n        router.push('/login');\r\n      } else if (isLoggedIn) {\r\n        userStore.setUserInfo(JSON.parse(localStorage.getItem('userInfo'))); \r\n      }\r\n    });\r\n\r\n    \r\n    // 拦截所有axios请求，检查响应状态码\r\n    axios.interceptors.response.use(\r\n      response => response,\r\n      error => {\r\n        if (error.response && error.response.status === 403) {\r\n          // 如果接收到403状态码，自动注销用户并跳转到登录页面\r\n          Swal.fire({\r\n            title: '登录状态过期',\r\n            text: '当前登录状态已过期，请重新登录',\r\n            icon: 'warning',\r\n            confirmButtonText: '确定'\r\n          }).then(() => {\r\n            localStorage.clear();\r\n            router.push('/login');\r\n          });\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  },  \r\n};\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n</style>"],"mappings":";AAOA,SAASA,SAAQ,QAAS,KAAK;AAC/B,SAASC,YAAW,QAAS,cAAc;AAC3C,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,UAAU;AAC7B,OAAOC,IAAG,MAAO,aAAa;AAE9B,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAIN,YAAY,CAAC,CAAC;IAEhCD,SAAS,CAAC,MAAM;MACd,MAAMQ,UAAS,GAAIC,YAAY,CAACC,OAAO,CAAC,YAAY,MAAM,MAAM;MAChE,MAAMC,WAAU,GAAIR,MAAM,CAACS,YAAY,CAACC,KAAK,CAACC,IAAI;MAElD,IAAI,CAACN,UAAS,IAAKG,WAAU,KAAM,QAAO,IAAKA,WAAU,KAAM,WAAW,EAAE;QAC1ER,MAAM,CAACY,IAAI,CAAC,QAAQ,CAAC;MACvB,OAAO,IAAIP,UAAU,EAAE;QACrBD,SAAS,CAACS,WAAW,CAACC,IAAI,CAACC,KAAK,CAACT,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;MACrE;IACF,CAAC,CAAC;;IAGF;IACAR,KAAK,CAACiB,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC7BD,QAAO,IAAKA,QAAQ,EACpBE,KAAI,IAAK;MACP,IAAIA,KAAK,CAACF,QAAO,IAAKE,KAAK,CAACF,QAAQ,CAACG,MAAK,KAAM,GAAG,EAAE;QACnD;QACAnB,IAAI,CAACoB,IAAI,CAAC;UACRC,KAAK,EAAE,QAAQ;UACfC,IAAI,EAAE,iBAAiB;UACvBC,IAAI,EAAE,SAAS;UACfC,iBAAiB,EAAE;QACrB,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM;UACZpB,YAAY,CAACqB,KAAK,CAAC,CAAC;UACpB3B,MAAM,CAACY,IAAI,CAAC,QAAQ,CAAC;QACvB,CAAC,CAAC;MACJ;MACA,OAAOgB,OAAO,CAACC,MAAM,CAACV,KAAK,CAAC;IAC9B,CACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}