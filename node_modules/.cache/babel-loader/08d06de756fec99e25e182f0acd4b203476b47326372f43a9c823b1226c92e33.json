{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"panel panel-default mt-3\"\n};\nconst _hoisted_2 = {\n  class: \"panel-heading\"\n};\nconst _hoisted_3 = {\n  class: \"panel-title\"\n};\nconst _hoisted_4 = {\n  class: \"panel-body\"\n};\nconst _hoisted_5 = {\n  class: \"table table-striped\"\n};\nconst _hoisted_6 = {\n  class: \"highlight\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h3\", _hoisted_3, _toDisplayString($setup.matchingKey), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"table\", _hoisted_5, [_createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredData, (value, key) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: key\n    }, [_createElementVNode(\"td\", _hoisted_6, _toDisplayString(key), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(value), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","$setup","matchingKey","_hoisted_4","_hoisted_5","_Fragment","_renderList","filteredData","value","key","_hoisted_6"],"sources":["D:\\当下文件\\python\\Bridge-1\\src\\components\\PeriodSituation.vue"],"sourcesContent":["<template>\r\n  <div class=\"panel panel-default mt-3\">\r\n      <div class=\"panel-heading\">\r\n          <h3 class=\"panel-title\">{{ matchingKey }}</h3> \r\n      </div>\r\n      <div class=\"panel-body\">\r\n        <table class=\"table table-striped\">\r\n          <tbody>\r\n            <tr v-for=\"(value, key) in filteredData\" :key=\"key\">\r\n              <td class=\"highlight\">{{ key }}</td>\r\n              <td>{{ value }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport { useUserStore } from '@/store/user';\r\nimport axios from '@/api/axios';\r\n\r\nexport default {\r\n  setup() {\r\n      const userStore = useUserStore();\r\n        userStore.setSelectedHistory(localStorage.getItem('SelectedPeriod'));\r\n        \r\n      const selectedHistory = computed(() => userStore.selectedHistory);  \r\n      const Data = ref({}); \r\n\r\n      const fetchData = async () => {\r\n          try {\r\n              const response = await axios.get('/users/look1/', {\r\n                  withCredentials: true\r\n              });\r\n              Data.value = response.data; \r\n              console.log('获取周期形势数据成功:', Data.value);\r\n          } catch (error) {\r\n              console.error('获取周期形势数据时发生错误:', error);\r\n          }\r\n      };\r\n\r\n      // 在组件挂载时请求数据\r\n      onMounted(() => {\r\n          fetchData();\r\n      });\r\n\r\n      // 计算属性：检查是否存在 selectedHistory 字段对应的数据\r\n      const matchingKey = computed(() => {\r\n          return Object.keys(Data.value).find(key => key.includes(selectedHistory.value));\r\n      });\r\n\r\n      // 计算属性：返回过滤后的数据\r\n      const filteredData = computed(() => {\r\n          const dataEntries = Object.entries(Data.value[matchingKey.value] || {});\r\n          return dataEntries.slice(1).reduce((acc, [key, value]) => {\r\n              acc[key] = value;\r\n              return acc;\r\n          }, {});\r\n      });\r\n\r\n      return {\r\n          Data,\r\n          matchingKey,\r\n          filteredData,\r\n          selectedHistory\r\n      };\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.panel {\r\n  margin-top: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.panel-heading {\r\n  background-color: #f7f7f9;\r\n  padding: 15px;\r\n}\r\n\r\n.panel-body {\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.table-striped > tbody > tr:nth-child(odd) {\r\n  background-color: #f9f9f9;\r\n  border-radius: 5px;\r\n}\r\n\r\n.highlight {\r\n    background-color: #f3776c;\r\n    color: #fff;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAA0B;;EAC5BA,KAAK,EAAC;AAAe;;EAClBA,KAAK,EAAC;AAAa;;EAEtBA,KAAK,EAAC;AAAY;;EACdA,KAAK,EAAC;AAAqB;;EAGxBA,KAAK,EAAC;AAAW;;uBARjCC,mBAAA,CAcM,OAdNC,UAcM,GAbFC,mBAAA,CAEM,OAFNC,UAEM,GADFD,mBAAA,CAA8C,MAA9CE,UAA8C,EAAAC,gBAAA,CAAnBC,MAAA,CAAAC,WAAW,iB,GAE1CL,mBAAA,CASM,OATNM,UASM,GARJN,mBAAA,CAOQ,SAPRO,UAOQ,GANNP,mBAAA,CAKQ,iB,kBAJNF,mBAAA,CAGKU,SAAA,QAXjBC,WAAA,CAQuCL,MAAA,CAAAM,YAAY,EARnD,CAQwBC,KAAK,EAAEC,GAAG;yBAAtBd,mBAAA,CAGK;MAHqCc,GAAG,EAAEA;IAAG,IAChDZ,mBAAA,CAAoC,MAApCa,UAAoC,EAAAV,gBAAA,CAAXS,GAAG,kBAC5BZ,mBAAA,CAAoB,YAAAG,gBAAA,CAAbQ,KAAK,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}