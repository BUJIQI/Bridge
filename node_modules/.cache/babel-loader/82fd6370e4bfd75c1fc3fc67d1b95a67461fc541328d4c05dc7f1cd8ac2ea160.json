{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useUserStore } from '@/store/user';\nimport { ref, computed, watch } from 'vue';\nimport axios from '@/api/axios';\nimport Swal from 'sweetalert2';\nimport { useRouter } from 'vue-router';\nexport default {\n  setup() {\n    const userStore = useUserStore();\n    const userInfo = userStore.userInfo;\n    const isOwnEnterprise = ref(true);\n    const isLoading = ref(false);\n    const explanations = ref({});\n    const explanationVisibility = ref({});\n    const explanationStyle = ref({});\n    const explanationTimer = ref({});\n    const currentLabel = ref('');\n    const router = useRouter();\n\n    // 定义初始输入数据\n    const formData = ref({\n      general_market_price: '1150',\n      advertising_investment: '1',\n      sales_staff: '40',\n      market_research_report: 'N',\n      bid_price: '0',\n      special_product_qty: '2000',\n      production_plan_qty: '21600',\n      production_line_investment: '0',\n      production_line_change: '0',\n      maintenance_cost: '0.1',\n      production_optimization_investment: '0',\n      production_staff_recruitment: '4',\n      production_staff_resignation: '0',\n      purchase_robot: '0',\n      raw_material_purchase_qty: '21600',\n      purchase_accessories: '20800',\n      research_staff_recruitment: '0',\n      research_staff_resignation: '0',\n      product_improvement_cost: '0.39',\n      social_benefits: '80',\n      medium_term_loan: '5',\n      purchase_securities: '0',\n      planned_dividend_payment: '0.3',\n      management_optimization_investment: '0'\n    });\n\n    // 定义字段和单位\n    const salesFields = {\n      '一般市场价格': 'general_market_price',\n      '广告费用投入': 'advertising_investment',\n      '销售人员个数': 'sales_staff',\n      '市场和生产研究报告': 'market_research_report',\n      '附一：投标价格': 'bid_price',\n      '附二：特殊产品数': 'special_product_qty'\n    };\n    const productionFields = {\n      '一般市场产品计划量': 'production_plan_qty',\n      '生产线投资数': 'production_line_investment',\n      '生产线变卖数': 'production_line_change',\n      '维修保养费用': 'maintenance_cost',\n      '生产合理化投资': 'production_optimization_investment',\n      '生产人员招收数': 'production_staff_recruitment',\n      '生产人员辞退数': 'production_staff_resignation',\n      '购买机器人': 'purchase_robot'\n    };\n    const purchasingFields = {\n      '购买原材料量': 'raw_material_purchase_qty',\n      '购买附件量': 'purchase_accessories'\n    };\n    const qualityFields = {\n      '科研人员招收数': 'research_staff_recruitment',\n      '科研人员辞退数': 'research_staff_resignation',\n      '产品改进费用': 'product_improvement_cost'\n    };\n    const financeFields = {\n      '社会福利费用': 'social_benefits',\n      '中期贷款': 'medium_term_loan',\n      '购买有价证券': 'purchase_securities',\n      '计划支付股息': 'planned_dividend_payment',\n      '管理合理化投资': 'management_optimization_investment'\n    };\n    const units = {\n      general_market_price: '元/台',\n      advertising_investment: '百万元',\n      sales_staff: '个',\n      market_research_report: 'Y/N',\n      bid_price: '元/台',\n      special_product_qty: '台',\n      production_plan_qty: '台',\n      production_line_investment: '条',\n      production_line_change: '条',\n      maintenance_cost: '百万元',\n      production_optimization_investment: '百万元',\n      production_staff_recruitment: '个',\n      production_staff_resignation: '个',\n      purchase_robot: '个',\n      raw_material_purchase_qty: '单位',\n      purchase_accessories: '单位',\n      research_staff_recruitment: '个',\n      research_staff_resignation: '个',\n      product_improvement_cost: '百万元',\n      social_benefits: '%',\n      medium_term_loan: '百万元',\n      purchase_securities: '百万元',\n      planned_dividend_payment: '百万元',\n      management_optimization_investment: '百万元'\n    };\n\n    // 计算属性对象，根据 userInfo?.cycle 设置多个字段的值\n    const dynamicFields = computed({\n      get() {\n        return {\n          production_line_investment: userInfo?.cycle === 1 ? 2 : 0,\n          production_staff_recruitment: userInfo?.cycle === 1 ? 30 : 4,\n          research_staff_recruitment: userInfo?.cycle === 1 ? 2 : 0\n        };\n      },\n      set(values) {\n        formData.value.production_line_investment = values.production_line_investment;\n        formData.value.production_staff_recruitment = values.production_staff_recruitment;\n        formData.value.research_staff_recruitment = values.research_staff_recruitment;\n      }\n    });\n\n    // 监听 dynamicFields 并更新 formData\n    watch(dynamicFields, newValues => {\n      formData.value.production_line_investment = newValues.production_line_investment;\n      formData.value.production_staff_recruitment = newValues.production_staff_recruitment;\n      formData.value.research_staff_recruitment = newValues.research_staff_recruitment;\n    }, {\n      immediate: true\n    });\n\n    // 键名映射对象\n    const keyMapping = {\n      '附一：投标价格': '附加市场I--投标价格',\n      '附二：特殊产品数': '附加市场II--特殊产品数',\n      '购买原材料量': '购买原材料、附件量',\n      '购买附件量': '购买原材料、附件量',\n      '科研人员招收数': '研发人员招收和辞退',\n      '科研人员辞退数': '研发人员招收和辞退'\n    };\n    const showExplanation = async label => {\n      // 隐藏所有解释框\n      for (const key in explanationVisibility.value) {\n        explanationVisibility.value[key] = false;\n      }\n      currentLabel.value = label;\n      try {\n        const response = await axios.get(`/users/decision_terms_introduction/`, {\n          withCredentials: true\n        });\n        const data = response.data;\n        explanations.value[label] = data[keyMapping[label] || label];\n\n        // 找到对应的 input-wrapper 元素\n        const inputWrapper = document.getElementById(salesFields[label] || productionFields[label] || purchasingFields[label] || qualityFields[label] || financeFields[label]);\n        if (inputWrapper) {\n          const rect = inputWrapper.getBoundingClientRect();\n          explanationStyle.value[label] = {\n            top: `${rect.bottom + window.scrollY - 35}px`,\n            left: `${rect.right + window.scrollX + 40}px`\n          };\n        }\n\n        // 显示解释框\n        explanationVisibility.value[label] = true;\n\n        // 设置定时器隐藏解释框\n        if (explanationTimer.value[label]) {\n          clearTimeout(explanationTimer.value[label]);\n        }\n        explanationTimer.value[label] = setTimeout(() => {\n          explanationVisibility.value[label] = false;\n        }, 30000);\n      } catch (error) {\n        console.error('获取名词解释时发生错误:', error);\n        Swal.fire('错误', '获取名词解释时发生错误，请重试。', 'error');\n      }\n    };\n    const navigateToNounsExplanation = label => {\n      if (label) {\n        router.push({\n          name: 'NounsExplanation',\n          params: {\n            noun: label\n          }\n        });\n      }\n    };\n    return {\n      userInfo,\n      isOwnEnterprise,\n      isLoading,\n      formData,\n      dynamicFields,\n      salesFields,\n      productionFields,\n      purchasingFields,\n      qualityFields,\n      financeFields,\n      units,\n      explanations,\n      explanationVisibility,\n      explanationStyle,\n      explanationTimer,\n      showExplanation,\n      navigateToNounsExplanation\n    };\n  },\n  methods: {\n    selectMode(mode) {\n      this.isOwnEnterprise = mode === 'own';\n    },\n    makeBudgetDecision() {\n      alert('进行预算决策');\n    },\n    async submitDecision() {\n      const result = await Swal.fire({\n        title: '确认提交',\n        text: '您确定要提交决策数据吗？',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: '确定',\n        cancelButtonText: '取消'\n      });\n      if (result.isConfirmed) {\n        this.isLoading = true;\n        try {\n          const response = await axios.post('/users/commit_decision/', this.formData, {\n            withCredentials: true\n          });\n          const submitResult = response.data;\n\n          // 更新周期\n          const userInfoString = localStorage.getItem('userInfo');\n          const userInfoObject = JSON.parse(userInfoString);\n          userInfoObject.cycle = submitResult['提交后周期'];\n          localStorage.setItem('userInfo', JSON.stringify(userInfoObject));\n          if (submitResult['提交结果'] === '决策数据已经成功递交') {\n            Swal.fire('成功', '决策数据已经成功递交，可前往查看竞争结果报表', 'success').then(() => {\n              window.location.reload(); // 自动刷新页面\n            });\n          } else {\n            Swal.fire('失败', submitResult['提交结果'], 'error');\n          }\n        } catch (error) {\n          if (error.response && error.response.status === 403) {\n            // 处理403状态码\n            Swal.fire({\n              title: '登录状态过期',\n              text: '当前登录状态已过期，请重新登录',\n              icon: 'warning',\n              confirmButtonText: '确定'\n            }).then(() => {\n              localStorage.clear();\n              this.$router.push('/login');\n            });\n          } else {\n            console.error('提交决策时发生错误:', error);\n            Swal.fire('错误', '提交决策时发生错误，请重试。', 'error');\n          }\n        } finally {\n          this.isLoading = false; // 结束加载\n        }\n      } else {\n        Swal.fire('已取消', '您的决策数据未提交', 'info');\n      }\n    }\n  }\n};","map":{"version":3,"names":["useUserStore","ref","computed","watch","axios","Swal","useRouter","setup","userStore","userInfo","isOwnEnterprise","isLoading","explanations","explanationVisibility","explanationStyle","explanationTimer","currentLabel","router","formData","general_market_price","advertising_investment","sales_staff","market_research_report","bid_price","special_product_qty","production_plan_qty","production_line_investment","production_line_change","maintenance_cost","production_optimization_investment","production_staff_recruitment","production_staff_resignation","purchase_robot","raw_material_purchase_qty","purchase_accessories","research_staff_recruitment","research_staff_resignation","product_improvement_cost","social_benefits","medium_term_loan","purchase_securities","planned_dividend_payment","management_optimization_investment","salesFields","productionFields","purchasingFields","qualityFields","financeFields","units","dynamicFields","get","cycle","set","values","value","newValues","immediate","keyMapping","showExplanation","label","key","response","withCredentials","data","inputWrapper","document","getElementById","rect","getBoundingClientRect","top","bottom","window","scrollY","left","right","scrollX","clearTimeout","setTimeout","error","console","fire","navigateToNounsExplanation","push","name","params","noun","methods","selectMode","mode","makeBudgetDecision","alert","submitDecision","result","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","isConfirmed","post","submitResult","userInfoString","localStorage","getItem","userInfoObject","JSON","parse","setItem","stringify","then","location","reload","status","clear","$router"],"sources":["D:\\当下文件\\python\\Bridge-1\\src\\components\\InputData.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"no-report-message\" v-if=\"userInfo.cycle === 8\">本轮七周决策已全部结束<br>可前往查看全部结果</div>\r\n    <div v-else>\r\n      <div class=\"panel panel-default mt-3\">\r\n        <div class=\"panel-heading\">\r\n          <h3 class=\"panel-title\">第{{ userInfo?.cycle }}周期决策数据输入</h3>\r\n          <div class=\"mode-selection\" style=\"float: right;\">\r\n            <span>选择模式：</span>\r\n            <button :class=\"{ active: isOwnEnterprise }\" @click=\"selectMode('own')\">本企业</button>\r\n            <button :class=\"{ active: !isOwnEnterprise }\" @click=\"selectMode('competitor')\">竞争企业</button>\r\n          </div>\r\n        </div>\r\n        <div class=\"panel-body\">\r\n          <section class=\"decision-section sales\">\r\n            <h2>销售</h2>\r\n            <div class=\"input-group\" v-for=\"(value, key) in salesFields\" :key=\"key\">\r\n              <label :for=\"value\" @click=\"showExplanation(key)\">{{ key }}</label>\r\n              <div class=\"input-wrapper\" :id=\"value\">\r\n                <select v-if=\"key === '市场和生产研究报告'\" :id=\"value\" v-model=\"formData[value]\">\r\n                  <option value=\"Y\">Y</option>\r\n                  <option value=\"N\">N</option>\r\n                </select>\r\n                <input v-else type=\"text\" :id=\"value\" v-model=\"formData[value]\" />\r\n                <span class=\"unit\">{{ units[value] }}</span>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <section class=\"decision-section production\">\r\n            <h2>生产</h2>\r\n            <div class=\"input-group\" v-for=\"(value, key) in productionFields\" :key=\"key\">\r\n              <label :for=\"value\" @click=\"showExplanation(key)\">{{ key }}</label>\r\n              <div class=\"input-wrapper\" :id=\"value\">\r\n                <input type=\"text\" :id=\"value\" v-model=\"formData[value]\" />\r\n                <span class=\"unit\">{{ units[value] }}</span>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <section class=\"decision-section purchasing\">\r\n            <h2>采购</h2>\r\n            <div class=\"input-group\" v-for=\"(value, key) in purchasingFields\" :key=\"key\">\r\n              <label :for=\"value\" @click=\"showExplanation(key)\">{{ key }}</label>\r\n              <div class=\"input-wrapper\" :id=\"value\">\r\n                <input type=\"text\" :id=\"value\" v-model=\"formData[value]\" />\r\n                <span class=\"unit\">{{ units[value] }}</span>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <section class=\"decision-section quality\">\r\n            <h2>质量</h2>\r\n            <div class=\"input-group\" v-for=\"(value, key) in qualityFields\" :key=\"key\">\r\n              <label :for=\"value\" @click=\"showExplanation(key)\">{{ key }}</label>\r\n              <div class=\"input-wrapper\" :id=\"value\">\r\n                <input type=\"text\" :id=\"value\" v-model=\"formData[value]\" />\r\n                <span class=\"unit\">{{ units[value] }}</span>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <section class=\"decision-section finance\">\r\n            <h2>财务</h2>\r\n            <div class=\"input-group\" v-for=\"(value, key) in financeFields\" :key=\"key\">\r\n              <label :for=\"value\" @click=\"showExplanation(key)\">{{ key }}</label>\r\n              <div class=\"input-wrapper\" :id=\"value\">\r\n                <input type=\"text\" :id=\"value\" v-model=\"formData[value]\" />\r\n                <span class=\"unit\">{{ units[value] }}</span>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <div v-if=\"isLoading\" class=\"loading-indicator\">\r\n            正在提交，请稍候...\r\n          </div>\r\n          <div class=\"button-group\">\r\n            <button class=\"custom-button\" @click=\"makeBudgetDecision\">预算决策</button>\r\n            <button class=\"custom-button\" @click=\"submitDecision\"\r\n                    :disabled=\"!isOwnEnterprise || isLoading\"\r\n                    :class=\"{ 'disabled-button': !isOwnEnterprise || isLoading }\">\r\n              提交决策\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <transition name=\"fade\" v-for=\"(isVisible, key) in explanationVisibility\" :key=\"key\" appear>\r\n        <div v-if=\"isVisible\" :style=\"explanationStyle[key]\" class=\"explanation-box\">\r\n          {{ explanations[key] }}\r\n          <div class=\"details-container\">\r\n            <span class=\"arrow\" @click=\"navigateToNounsExplanation(key)\"></span>\r\n            <span class=\"details\" @click=\"navigateToNounsExplanation(key)\">查看详情</span>\r\n          </div>\r\n        </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useUserStore } from '@/store/user';\r\nimport { ref, computed, watch } from 'vue';\r\nimport axios from '@/api/axios';\r\nimport Swal from 'sweetalert2';\r\nimport { useRouter } from 'vue-router'; \r\n\r\nexport default {\r\n  setup() {\r\n    const userStore = useUserStore();\r\n    const userInfo = userStore.userInfo;\r\n    const isOwnEnterprise = ref(true);\r\n    const isLoading = ref(false);\r\n    const explanations = ref({});\r\n    const explanationVisibility = ref({});\r\n    const explanationStyle = ref({});\r\n    const explanationTimer = ref({});\r\n    const currentLabel = ref('');\r\n    const router = useRouter(); \r\n\r\n    // 定义初始输入数据\r\n    const formData = ref({\r\n      general_market_price: '1150',\r\n      advertising_investment: '1',\r\n      sales_staff: '40',\r\n      market_research_report: 'N',\r\n      bid_price: '0',\r\n      special_product_qty: '2000',\r\n      production_plan_qty: '21600',\r\n      production_line_investment: '0',\r\n      production_line_change: '0',\r\n      maintenance_cost: '0.1',\r\n      production_optimization_investment: '0',\r\n      production_staff_recruitment: '4',\r\n      production_staff_resignation: '0',\r\n      purchase_robot: '0',\r\n      raw_material_purchase_qty: '21600',\r\n      purchase_accessories: '20800',\r\n      research_staff_recruitment: '0',\r\n      research_staff_resignation: '0',\r\n      product_improvement_cost: '0.39',\r\n      social_benefits: '80',\r\n      medium_term_loan: '5',\r\n      purchase_securities: '0',\r\n      planned_dividend_payment: '0.3',\r\n      management_optimization_investment: '0'\r\n    });\r\n\r\n    // 定义字段和单位\r\n    const salesFields = {\r\n      '一般市场价格': 'general_market_price',\r\n      '广告费用投入': 'advertising_investment',\r\n      '销售人员个数': 'sales_staff',\r\n      '市场和生产研究报告': 'market_research_report',\r\n      '附一：投标价格': 'bid_price',\r\n      '附二：特殊产品数': 'special_product_qty'\r\n    };\r\n\r\n    const productionFields = {\r\n      '一般市场产品计划量': 'production_plan_qty',\r\n      '生产线投资数': 'production_line_investment',\r\n      '生产线变卖数': 'production_line_change',\r\n      '维修保养费用': 'maintenance_cost',\r\n      '生产合理化投资': 'production_optimization_investment',\r\n      '生产人员招收数': 'production_staff_recruitment',\r\n      '生产人员辞退数': 'production_staff_resignation',\r\n      '购买机器人': 'purchase_robot'\r\n    };\r\n\r\n    const purchasingFields = {\r\n      '购买原材料量': 'raw_material_purchase_qty',\r\n      '购买附件量': 'purchase_accessories'\r\n    };\r\n\r\n    const qualityFields = {\r\n      '科研人员招收数': 'research_staff_recruitment',\r\n      '科研人员辞退数': 'research_staff_resignation',\r\n      '产品改进费用': 'product_improvement_cost'\r\n    };\r\n\r\n    const financeFields = {\r\n      '社会福利费用': 'social_benefits',\r\n      '中期贷款': 'medium_term_loan',\r\n      '购买有价证券': 'purchase_securities',\r\n      '计划支付股息': 'planned_dividend_payment',\r\n      '管理合理化投资': 'management_optimization_investment'\r\n    };\r\n\r\n    const units = {\r\n      general_market_price: '元/台',\r\n      advertising_investment: '百万元',\r\n      sales_staff: '个',\r\n      market_research_report: 'Y/N',\r\n      bid_price: '元/台',\r\n      special_product_qty: '台',\r\n      production_plan_qty: '台',\r\n      production_line_investment: '条',\r\n      production_line_change: '条',\r\n      maintenance_cost: '百万元',\r\n      production_optimization_investment: '百万元',\r\n      production_staff_recruitment: '个',\r\n      production_staff_resignation: '个',\r\n      purchase_robot: '个',\r\n      raw_material_purchase_qty: '单位',\r\n      purchase_accessories: '单位',\r\n      research_staff_recruitment: '个',\r\n      research_staff_resignation: '个',\r\n      product_improvement_cost: '百万元',\r\n      social_benefits: '%',\r\n      medium_term_loan: '百万元',\r\n      purchase_securities: '百万元',\r\n      planned_dividend_payment: '百万元',\r\n      management_optimization_investment: '百万元'\r\n    };\r\n\r\n    // 计算属性对象，根据 userInfo?.cycle 设置多个字段的值\r\n    const dynamicFields = computed({\r\n      get() {\r\n        return {\r\n          production_line_investment: userInfo?.cycle === 1 ? 2 : 0,\r\n          production_staff_recruitment: userInfo?.cycle === 1 ? 30 : 4,\r\n          research_staff_recruitment: userInfo?.cycle === 1 ? 2 : 0\r\n        };\r\n      },\r\n      set(values) {\r\n        formData.value.production_line_investment = values.production_line_investment;\r\n        formData.value.production_staff_recruitment = values.production_staff_recruitment;\r\n        formData.value.research_staff_recruitment = values.research_staff_recruitment;\r\n      }\r\n    });\r\n\r\n    // 监听 dynamicFields 并更新 formData\r\n    watch(dynamicFields, (newValues) => {\r\n      formData.value.production_line_investment = newValues.production_line_investment;\r\n      formData.value.production_staff_recruitment = newValues.production_staff_recruitment;\r\n      formData.value.research_staff_recruitment = newValues.research_staff_recruitment;\r\n    }, { immediate: true });\r\n\r\n    // 键名映射对象\r\n    const keyMapping = {\r\n      '附一：投标价格': '附加市场I--投标价格',\r\n      '附二：特殊产品数': '附加市场II--特殊产品数',\r\n      '购买原材料量': '购买原材料、附件量',\r\n      '购买附件量': '购买原材料、附件量',\r\n      '科研人员招收数': '研发人员招收和辞退',\r\n      '科研人员辞退数': '研发人员招收和辞退',\r\n    };    \r\n\r\n    const showExplanation = async (label) => {\r\n      // 隐藏所有解释框\r\n      for (const key in explanationVisibility.value) {\r\n        explanationVisibility.value[key] = false;\r\n      }\r\n\r\n      currentLabel.value = label;\r\n      try {\r\n        const response = await axios.get(`/users/decision_terms_introduction/`, {\r\n          withCredentials: true\r\n        });\r\n        const data = response.data;\r\n        explanations.value[label] = data[keyMapping[label] || label];\r\n\r\n        // 找到对应的 input-wrapper 元素\r\n        const inputWrapper = document.getElementById(salesFields[label] || productionFields[label] || purchasingFields[label] || qualityFields[label] || financeFields[label]);\r\n        if (inputWrapper) {\r\n          const rect = inputWrapper.getBoundingClientRect();\r\n          explanationStyle.value[label] = {\r\n            top: `${rect.bottom + window.scrollY - 35}px`,\r\n            left: `${rect.right + window.scrollX + 40}px`\r\n          };\r\n        }\r\n\r\n        // 显示解释框\r\n        explanationVisibility.value[label] = true;\r\n\r\n        // 设置定时器隐藏解释框\r\n        if (explanationTimer.value[label]) {\r\n          clearTimeout(explanationTimer.value[label]);\r\n        }\r\n        explanationTimer.value[label] = setTimeout(() => {\r\n          explanationVisibility.value[label] = false;\r\n        }, 30000);\r\n      } catch (error) {\r\n        console.error('获取名词解释时发生错误:', error);\r\n        Swal.fire('错误', '获取名词解释时发生错误，请重试。', 'error');\r\n      }\r\n    };\r\n\r\n    const navigateToNounsExplanation = (label) => {\r\n      if (label) {\r\n        router.push({ name: 'NounsExplanation', params: { noun: label } });\r\n      }\r\n    };\r\n\r\n    return {\r\n      userInfo,\r\n      isOwnEnterprise,\r\n      isLoading,\r\n      formData,\r\n      dynamicFields,\r\n      salesFields,\r\n      productionFields,\r\n      purchasingFields,\r\n      qualityFields,\r\n      financeFields,\r\n      units,\r\n      explanations,\r\n      explanationVisibility,\r\n      explanationStyle,\r\n      explanationTimer,\r\n      showExplanation,\r\n      navigateToNounsExplanation\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    selectMode(mode) {\r\n      this.isOwnEnterprise = (mode === 'own');\r\n    },\r\n\r\n    makeBudgetDecision() {\r\n      alert('进行预算决策');\r\n    },\r\n\r\n    async submitDecision() {\r\n      const result = await Swal.fire({\r\n        title: '确认提交',\r\n        text: '您确定要提交决策数据吗？',\r\n        icon: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消'\r\n      });\r\n\r\n      if (result.isConfirmed) {\r\n        this.isLoading = true;\r\n        try {\r\n          const response = await axios.post('/users/commit_decision/', this.formData, {\r\n            withCredentials: true\r\n          });\r\n          const submitResult = response.data;\r\n\r\n          // 更新周期\r\n          const userInfoString = localStorage.getItem('userInfo');\r\n          const userInfoObject = JSON.parse(userInfoString);\r\n          userInfoObject.cycle = submitResult['提交后周期'];\r\n          localStorage.setItem('userInfo', JSON.stringify(userInfoObject));\r\n\r\n          if (submitResult['提交结果'] === '决策数据已经成功递交') {\r\n            Swal.fire('成功', '决策数据已经成功递交，可前往查看竞争结果报表', 'success').then(() => {\r\n              window.location.reload(); // 自动刷新页面\r\n            });\r\n          } else {\r\n            Swal.fire('失败', submitResult['提交结果'], 'error');\r\n          }\r\n        } catch (error) {\r\n          if (error.response && error.response.status === 403) {\r\n            // 处理403状态码\r\n            Swal.fire({\r\n              title: '登录状态过期',\r\n              text: '当前登录状态已过期，请重新登录',\r\n              icon: 'warning',\r\n              confirmButtonText: '确定'\r\n            }).then(() => {\r\n              localStorage.clear();\r\n              this.$router.push('/login');\r\n            });\r\n          } else {\r\n            console.error('提交决策时发生错误:', error);\r\n            Swal.fire('错误', '提交决策时发生错误，请重试。', 'error');\r\n          }\r\n        } finally {\r\n          this.isLoading = false; // 结束加载\r\n        }\r\n      } else {\r\n        Swal.fire('已取消', '您的决策数据未提交', 'info');\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.no-report-message {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: calc(100vh - 100px);\r\n  font-size: 50px;\r\n  color: #333;\r\n  font-weight: bold;\r\n  text-align: center;\r\n}\r\n\r\n.panel {\r\n  margin-top: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.panel-heading {\r\n  background-color: #f7f7f9;\r\n  padding: 15px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.mode-selection {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.mode-selection button {\r\n  border: none;\r\n  padding: 5px;\r\n}\r\n\r\n.mode-selection button.active {\r\n  background-color: rgba(176, 63, 63, 0.733);\r\n  color: white;\r\n}\r\n\r\n.loading-indicator {\r\n  margin-top: 20px;\r\n  font-size: 16px;\r\n  color: #e74c3c;\r\n  text-align: center;\r\n  display: block;\r\n  visibility: visible;\r\n}\r\n\r\n.panel-body {\r\n  background-color: #ebdcdc;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.decision-section {\r\n  background-color: #ffffff;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n  padding: 20px;\r\n}\r\n\r\n.decision-section h2 {\r\n  color: #333;\r\n  border-bottom: 2px solid #e53935;\r\n  padding-bottom: 5px;\r\n}\r\n\r\n.input-group {\r\n  display: flex;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.input-group label {\r\n  display: block;\r\n  color: #666;\r\n  margin-bottom: 5px;\r\n  margin-top: 5px;\r\n  width: 170px;\r\n  cursor: pointer; \r\n  transition: color 0.3s, font-weight 0.3s; \r\n}\r\n\r\n.input-group label:hover {\r\n  color: #333;\r\n  font-weight: bold; \r\n}\r\n\r\n.input-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: auto;\r\n}\r\n\r\n.input-wrapper input,\r\n.input-wrapper select {\r\n  flex: 1;\r\n  padding: 5px;\r\n  border: 1px solid #888;\r\n  border-radius: 4px;\r\n  margin-right: 5px;\r\n  width: 200px;\r\n}\r\n\r\n.input-wrapper .unit {\r\n  color: #666;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.custom-button {\r\n  background-color: #e74c3c; \r\n  color: white;     \r\n  padding: 10px;           \r\n  margin-left: 40px;\r\n  margin-right: 40px;         \r\n  border-radius: 5px;  \r\n  border: none;      \r\n  cursor: pointer;             \r\n  transition: background-color 0.3s, transform 0.2s; \r\n}\r\n\r\n.custom-button:hover {\r\n  background-color: #c0392b;  \r\n  transform: scale(1.05);      \r\n}\r\n\r\n.disabled-button {\r\n  background-color: #cccccc; \r\n  color: #666666;              \r\n  cursor: not-allowed;        \r\n  pointer-events: none;        \r\n}\r\n\r\n.custom-button:active {\r\n  transform: scale(0.95);     \r\n}\r\n\r\n.explanation-box {\r\n  position: absolute;\r\n  background-color: #fff;\r\n  border: 1px solid #ea8787;\r\n  font-size: 14px;\r\n  color: #3d3b3b;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  max-width: 400px;\r\n}\r\n\r\n.details-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.arrow {\r\n  display: inline-block;\r\n  width: 6px;\r\n  height: 6px;\r\n  border-bottom: 1px solid #666; \r\n  border-right: 1px solid #666; \r\n  transform: rotate(-45deg);\r\n  transition: transform 0.3s ease, border-color 0.3s ease;\r\n  margin-right: 4px; \r\n  cursor: pointer;\r\n}\r\n\r\n.details {\r\n  color: #666;\r\n  cursor: pointer;\r\n  transition: color 0.3s ease;\r\n  font-size: 12px;\r\n}\r\n\r\n.details-container:hover .arrow {\r\n  border-bottom: 1px solid #444; \r\n  border-right: 1px solid #444; \r\n}\r\n\r\n.details-container:hover .details {\r\n  color: #444;\r\n}\r\n\r\n/* 定义淡入动画 */\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: opacity 1s;\r\n}\r\n\r\n/* 定义淡入和淡出的状态 */\r\n.fade-enter-from, .fade-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}