{"ast":null,"code":"import axios from '@/api/axios';\nimport { ref, onMounted, watch, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nexport default {\n  setup() {\n    const route = useRoute();\n    const selectedKey = ref('');\n    const selectedValue = ref('');\n    const nounsExplanation = ref({});\n\n    // 键名映射对象\n    const keyMapping = {\n      '附一：投标价格': '附加市场I--投标价格',\n      '附二：特殊产品数': '附加市场II--特殊产品数',\n      '购买原材料量': '购买原材料、附件量',\n      '购买附件量': '购买原材料、附件量',\n      '科研人员招收数': '研发人员招收和辞退',\n      '科研人员辞退数': '研发人员招收和辞退'\n    };\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('/users/import_imformation/', {\n          withCredentials: true\n        });\n        nounsExplanation.value = response.data;\n      } catch (error) {\n        console.error('Error fetching import information:', error);\n      }\n    };\n\n    // 监听路由变化，更新显示内容\n    const updateContent = () => {\n      const noun = route.params.noun;\n      console.log('Current noun:', noun);\n      const mappedKey = keyMapping[noun] || noun;\n      if (mappedKey && nounsExplanation.value[mappedKey]) {\n        selectedKey.value = mappedKey;\n        selectedValue.value = nounsExplanation.value[mappedKey];\n      } else {\n        selectedKey.value = '';\n        selectedValue.value = '';\n      }\n    };\n    onMounted(() => {\n      fetchData().then(() => {\n        updateContent();\n      });\n    });\n    watch(() => route.params.noun, () => {\n      updateContent();\n    });\n\n    // 计算属性，将 \\r\\n 替换为 <p> 标签\n    const formattedSelectedValue = computed(() => {\n      return selectedValue.value.split('\\r\\n').map(line => `<p>${line}</p>`).join('');\n    });\n    return {\n      selectedKey,\n      formattedSelectedValue\n    };\n  }\n};","map":{"version":3,"names":["axios","ref","onMounted","watch","computed","useRoute","setup","route","selectedKey","selectedValue","nounsExplanation","keyMapping","fetchData","response","get","withCredentials","value","data","error","console","updateContent","noun","params","log","mappedKey","then","formattedSelectedValue","split","map","line","join"],"sources":["D:\\当下文件\\python\\Bridge-1\\src\\components\\NounsExplanation.vue"],"sourcesContent":["<template>\r\n  <div class=\"panel panel-default mt-3\">\r\n    <div class=\"panel-heading\">\r\n      <h3 class=\"panel-title\">{{ selectedKey }}</h3>\r\n    </div>\r\n    <div class=\"panel-body\">\r\n      <span v-html=\"formattedSelectedValue\"></span>\r\n    </div>\r\n  </div>    \r\n</template>\r\n\r\n<script>\r\nimport axios from '@/api/axios';\r\nimport { ref, onMounted, watch, computed } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\n\r\nexport default {\r\n  setup() {\r\n    const route = useRoute();\r\n    const selectedKey = ref('');\r\n    const selectedValue = ref('');\r\n    const nounsExplanation = ref({});\r\n\r\n    // 键名映射对象\r\n    const keyMapping = {\r\n      '附一：投标价格': '附加市场I--投标价格',\r\n      '附二：特殊产品数': '附加市场II--特殊产品数',\r\n      '购买原材料量': '购买原材料、附件量',\r\n      '购买附件量': '购买原材料、附件量',\r\n      '科研人员招收数': '研发人员招收和辞退',\r\n      '科研人员辞退数': '研发人员招收和辞退',\r\n    };\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.get('/users/import_imformation/', {\r\n          withCredentials: true\r\n        });\r\n        nounsExplanation.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching import information:', error);\r\n      }\r\n    };\r\n\r\n    // 监听路由变化，更新显示内容\r\n    const updateContent = () => {\r\n      const noun = route.params.noun;\r\n      console.log('Current noun:', noun); \r\n      const mappedKey = keyMapping[noun] || noun;\r\n      if (mappedKey && nounsExplanation.value[mappedKey]) {\r\n        selectedKey.value = mappedKey; \r\n        selectedValue.value = nounsExplanation.value[mappedKey];\r\n      } else {\r\n        selectedKey.value = '';\r\n        selectedValue.value = '';\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      fetchData().then(() => {\r\n        updateContent();\r\n      });\r\n    });\r\n\r\n    watch(\r\n      () => route.params.noun,\r\n      () => {\r\n        updateContent();\r\n      }\r\n    );\r\n\r\n    // 计算属性，将 \\r\\n 替换为 <p> 标签\r\n      const formattedSelectedValue = computed(() => {\r\n      return selectedValue.value.split('\\r\\n').map(line => `<p>${line}</p>`).join('');\r\n    });  \r\n\r\n\r\n    return {\r\n      selectedKey,\r\n      formattedSelectedValue,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>  \r\n.panel {\r\n  margin-top: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.panel-heading {\r\n  background-color: #f7f7f9;\r\n  padding: 15px;\r\n  font-size: 1.25rem;\r\n}\r\n\r\n.panel-body {\r\n  padding: 20px;\r\n}\r\n\r\n.panel-body p {\r\n  margin-bottom: 30px; \r\n}\r\n</style>"],"mappings":"AAYA,OAAOA,KAAI,MAAO,aAAa;AAC/B,SAASC,GAAG,EAAEC,SAAS,EAAEC,KAAK,EAAEC,QAAO,QAAS,KAAK;AACrD,SAASC,QAAO,QAAS,YAAY;AAErC,eAAe;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIF,QAAQ,CAAC,CAAC;IACxB,MAAMG,WAAU,GAAIP,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMQ,aAAY,GAAIR,GAAG,CAAC,EAAE,CAAC;IAC7B,MAAMS,gBAAe,GAAIT,GAAG,CAAC,CAAC,CAAC,CAAC;;IAEhC;IACA,MAAMU,UAAS,GAAI;MACjB,SAAS,EAAE,aAAa;MACxB,UAAU,EAAE,eAAe;MAC3B,QAAQ,EAAE,WAAW;MACrB,OAAO,EAAE,WAAW;MACpB,SAAS,EAAE,WAAW;MACtB,SAAS,EAAE;IACb,CAAC;IAED,MAAMC,SAAQ,GAAI,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMb,KAAK,CAACc,GAAG,CAAC,4BAA4B,EAAE;UAC7DC,eAAe,EAAE;QACnB,CAAC,CAAC;QACFL,gBAAgB,CAACM,KAAI,GAAIH,QAAQ,CAACI,IAAI;MACxC,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;MAC5D;IACF,CAAC;;IAED;IACA,MAAME,aAAY,GAAIA,CAAA,KAAM;MAC1B,MAAMC,IAAG,GAAId,KAAK,CAACe,MAAM,CAACD,IAAI;MAC9BF,OAAO,CAACI,GAAG,CAAC,eAAe,EAAEF,IAAI,CAAC;MAClC,MAAMG,SAAQ,GAAIb,UAAU,CAACU,IAAI,KAAKA,IAAI;MAC1C,IAAIG,SAAQ,IAAKd,gBAAgB,CAACM,KAAK,CAACQ,SAAS,CAAC,EAAE;QAClDhB,WAAW,CAACQ,KAAI,GAAIQ,SAAS;QAC7Bf,aAAa,CAACO,KAAI,GAAIN,gBAAgB,CAACM,KAAK,CAACQ,SAAS,CAAC;MACzD,OAAO;QACLhB,WAAW,CAACQ,KAAI,GAAI,EAAE;QACtBP,aAAa,CAACO,KAAI,GAAI,EAAE;MAC1B;IACF,CAAC;IAEDd,SAAS,CAAC,MAAM;MACdU,SAAS,CAAC,CAAC,CAACa,IAAI,CAAC,MAAM;QACrBL,aAAa,CAAC,CAAC;MACjB,CAAC,CAAC;IACJ,CAAC,CAAC;IAEFjB,KAAK,CACH,MAAMI,KAAK,CAACe,MAAM,CAACD,IAAI,EACvB,MAAM;MACJD,aAAa,CAAC,CAAC;IACjB,CACF,CAAC;;IAED;IACE,MAAMM,sBAAqB,GAAItB,QAAQ,CAAC,MAAM;MAC9C,OAAOK,aAAa,CAACO,KAAK,CAACW,KAAK,CAAC,MAAM,CAAC,CAACC,GAAG,CAACC,IAAG,IAAK,MAAMA,IAAI,MAAM,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC;IACjF,CAAC,CAAC;IAGF,OAAO;MACLtB,WAAW;MACXkB;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}